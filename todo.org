#+title: Todo list and overview structure of the wikispider project
#+author: Richard Neilsen
#+STARTUP: indent

* Structure overview
** Spider
   A spider that finds pages in wsindex.sqlite, firstly from the To_Crawl table,
   and then from Pages, with the earliest added or crawled date, then downloads
   them, and does the following:
   1. Enters their pageid, raw_text, and crawled date into the Pages table
   2. Cycles through their 'links' list, and for each entry:
      if that title is already in Pages, add an entry to the Links table
      if that title isn't in Pages, add an entry to the To_Crawl table
   TODO: If a page, when downloaded, is a redirect, the page should be renamed
** Index
   A program that takes the raw_text of pages in the *Pages* table, enters all
   of their words into the Words table (if not already present), and enters a
   reference to them to the Mentions table
** Pagerank
   A program that processes the link structure and assigns pages in the *index* a
   pagerank
** Search
   A program that is given a word and returns a list of pageranked pages containing
   that word
*** Extensions
    - search on multiple words
    - return context snippets
    - search on phrases
** Initialise
   A program that wipes the database and resets them (mainly for testing purposes)

* Database schema
   CREATE TABLE To_Crawl
   (  title       TEXT,
      added       INTEGER,
      from_id     INTEGER);
   CREATE TABLE Pages
   (  page_id     INTEGER NOT NULL PRIMARY KEY UNIQUE,
      title       TEXT NOT NULL UNIQUE,
      raw_text    TEXT,
      zip_text    TEXT,
      crawled     INTEGER );
   CREATE TABLE Links
   (  from_id     INTEGER,
      to_id       INTEGER,
      PRIMARY KEY (from_id, to_id) );
   CREATE TABLE Words
   (  id          INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
      word        TEXT );
   CREATE TABLE Mentions
   (  word_id     INTEGER NOT NULL,
      page_id     INTEGER NOT NULL,
      position    INTEGER );
