#+title: Todo list and overview structure of the wikispider project
#+author: Richard Neilsen
#+STARTUP: indent

* Structure overview
** Spider
   A spider that finds pages in wsindex.sqlite, firstly from the To_Crawl table,
   and then from Pages, with the earliest added or crawled date, then downloads
   them, and does the following:
   1. Enters their pageid, raw_text, and crawled date into the Pages table
   2. Cycles through their 'links' list, and for each entry:
      if that title is already in Pages, add an entry to the Links table
      if that title isn't in Pages, add an entry to the To_Crawl table
   TODO: If a page, when downloaded, is a redirect, the page should be renamed
** Index
   A program that takes the raw_text of pages in the *Pages* table, enters all
   of their words into the Words table (if not already present), and enters a
   reference to them to the Mentions table
** Pagerank
   A program that processes the link structure and assigns pages in the *index* a
   pagerank
** Search
   A program that is given a word and returns a list of pageranked pages containing
   that word
*** Extensions
    - search on multiple words
    - return context snippets
    - search on phrases
** Initialise
   A program that wipes the database and resets them (mainly for testing purposes)

* Database overview
** wsindex.sqlite
    - title
    - added (NULL or date in unixepoch integer format)
    - from_id (FK int)
*** Pages (table)
    - pageid (PK)
    - title
    - raw_text
    - zip_text
    - crawled (NULL or date in unixepoch integer format)
*** Links (table)
    - from_id (FK)
    - to_id (FK)
*** Words (table)
    - id (int)
    - word
*** Mentions (table)
    - word_id (FK int)
    - page_id (FK int)
    - position (int)
