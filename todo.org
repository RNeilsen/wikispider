#+title: Todo list and overview structure of the wikispider project
#+author: Richard Neilsen
#+STARTUP: indent

* Structure overview
** Spider
   A spider that checks the *wsdump* db for pages that have the longest time since
   last crawled, them downloads them and writes their raw html them to the db
** Cleanup
   A cleanup program that takes raw html blobs from the *wsdump* database, and
   1. Extracts the usable links
      - needs to identify only the links in the article body, not the sidebar,
        nav box, links to talk pages, etc
      - those links should be written back into the *wsdump* db with NULL crawled
        date
   2. Extracts the article body, compresses it, and stores it in an *index* database
   3. Removes the raw html from the *wsdump* database but keeps that link 
      marked as visited (the entire compressed wikipedia corpus is about 20GB but
      uncompressed it's probably huge)
** Index
   A program that takes the compressed articles in the *index* database, and creates 
   a table of words, and a table of where words were used (many-to-many relation)
   - each word could include its position in the article, for showing 
     context snippets later during search
** Pagerank
   A program that processes the link structure and assigns pages in the *index* A
   pagerank
** Search
   A program that is given a word and returns a list of pageranked pages containing
   that word
*** Extensions
    - search on multiple words
    - return context snippets
    - search on phrases
** Initialise
   A program that wipes databases and resets them (mainly for testing purposes)

* Database overview
** wsdump.sqlite
*** Pages (table)
    - url (PK)
    - raw_html
    - crawled (NULL or date in unixepoch integer format)
    - cleaned (NULL or date in unixepoch integer format)
** wsindex.sqlite
*** Pages (table)
    - url (PK)
    - compressed article body
    - crawled (NULL or date in unixepoch integer format)
*** Links (table)
    - from (FK)
    - to (FK)
*** Words (table)
    - PK (int)
    - word
*** Mentions (table)
    - word (FK int)
    - page (FK int)
    - position (int)
  TODO continue
